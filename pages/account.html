<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
  <link href="../style.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="icon" href="../asset/images/cat_cutout.png" type="image/png">
  <title>SSAFIT</title>
</head>

<body>
<header>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold fs-1 d-flex align-items-center" href="#">
        <img src="../asset/images/cat_cutout.png" alt="SSAFIT Logo" class="ms-2 me-2" width="50" height="50">
        <span>SSAFIT</span>
      </a>
    </div>
  </nav>
</header>

<main>
  <!-- 메인 컨테이너 시작 -->
  <div class="container-lg my-4">
    <!-- 상단 제목 + 저장(데스크톱) -->
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h1 class="h5 mb-0">회원 계정 관리</h1>
      <button class="btn btn-primary d-none d-md-inline-flex btn-save">
        <i class="bi bi-floppy me-1"></i> 변경사항 저장
      </button>
    </div>

    <!-- 폼 시작 -->
    <form id="accountForm" class="row g-4 needs-validation" novalidate>
      <!-- 좌: 프로필 -->
      <section id="sec-profile" class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h2 class="h6 mb-3">계정</h2>

            <!-- 원형 아바타 + 톱니뱃지 -->
            <div class="d-flex align-items-center gap-3 mb-3">
              <div class="position-relative">
                <img id="avatarPreview"
                     class="rounded-circle object-fit-cover border"
                     src="https://picsum.photos/256?grayscale"
                     alt="프로필 미리보기"
                     style="width:160px;height:160px;">
                <span class="position-absolute bottom-0 end-0 translate-middle p-2 bg-white rounded-circle border" title="프로필 변경">
                  <i class="bi bi-gear-fill"></i>
                </span>
              </div>

              <div class="flex-grow-1">
                <!-- 닉네임 -->
                <label class="form-label" for="nickname">닉네임</label>
                <input id="nickname" name="nickname" type="text" class="form-control" placeholder="이름을 입력하세요"
                       required minlength="2" maxlength="20" autocomplete="nickname">
                <div class="invalid-feedback">닉네임을 2–20자로 입력하세요.</div>

                <!-- 이미지 업로드 -->
                <div class="mt-3">
                  <label class="form-label" for="avatarInput">프로필 사진</label>
                  <input id="avatarInput" name="avatar" class="form-control" type="file" accept=".jpg,.jpeg,.png,image/*">
                  <div class="form-text">정사각형 권장(512×512), JPG/PNG, 최대 2MB</div>
                </div>
              </div>
            </div>

            <hr class="my-3">

            <!-- 모바일용 저장 버튼 -->
            <button class="btn btn-primary w-100 d-md-none btn-save" type="submit">
              <i class="bi bi-floppy me-1"></i> 변경사항 저장
            </button>
          </div>
        </div>
      </section>

      <!-- 우: 계정보안 + 선호 설정 -->
      <section id="sec-security" class="col-md-8">
        <div class="card shadow-sm mb-4">
          <div class="card-body">
            <h2 class="h6 mb-3">계정 보안</h2>

            <!-- 이메일 -->
            <div class="mb-3">
              <label class="form-label" for="email"><i class="bi bi-person-badge"></i> 아이디(이메일)</label>
              <div class="input-group">
                <span class="input-group-text" id="email-addon"><i class="bi bi-at"></i></span>
                <input id="email" name="email" type="email" class="form-control" placeholder="you@example.com"
                       aria-describedby="email-addon" required autocomplete="email">
                <div class="invalid-feedback">올바른 이메일을 입력하세요.</div>
              </div>
            </div>

            <!-- 비밀번호(선택) -->
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label" for="pwd"><i class="bi bi-shield-lock"></i> 새 비밀번호 <span class="text-secondary">(선택)</span></label>
                <input id="pwd" name="password" type="password" class="form-control" placeholder="8자 이상" minlength="8" autocomplete="new-password">
                <!-- 강도 표시 -->
                <div class="progress mt-2" role="progressbar" aria-label="비밀번호 강도">
                  <div id="pwdBar" class="progress-bar" style="width:0%"></div>
                </div>
                <div class="form-text">영문 대/소문자, 숫자, 특수문자 조합 권장</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" for="pwd2">비밀번호 확인</label>
                <input id="pwd2" type="password" class="form-control" placeholder="다시 입력" autocomplete="new-password">
                <div class="invalid-feedback">비밀번호가 일치하지 않습니다.</div>
              </div>
            </div>

            <hr class="my-4">

            <!-- 목표/알림 -->
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label" for="goal"><i class="bi bi-list-check"></i> 어떤 것을 목표로 운동하시나요?</label>
                <select id="goal" name="goal" class="form-select" required>
                  <option value="" selected disabled>선택하세요</option>
                  <option value="등">등</option>
                  <option value="가슴">가슴</option>
                  <option value="다리">다리</option>
                  <option value="팔">팔</option>
                  <option value="어깨">어깨</option>
                </select>
                <div class="invalid-feedback">목표를 선택하세요.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" for="notice"><i class="bi bi-bell"></i> 알림</label>
                <div class="form-check form-switch mt-2">
                  <input class="form-check-input" type="checkbox" id="notice" name="notice" checked>
                  <label class="form-check-label" for="notice">이메일 알림 받기</label>
                </div>
              </div>
            </div>
          </div>

          <!-- 하단 저장버튼(데스크톱) -->
          <div class="card-footer d-none d-md-flex justify-content-end">
            <button class="btn btn-primary btn-save" type="submit">
              <i class="bi bi-floppy me-1"></i> 변경사항 저장
            </button>
          </div>
        </div>

        <!-- 위험 영역 -->
        <section id="sec-danger" class="card border-danger-subtle shadow-sm">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
              <div>
                <h2 class="h6 text-danger mb-1">계정삭제</h2>
                <p class="small text-secondary mb-0">삭제 시 모든 데이터가 영구적으로 제거됩니다.</p>
              </div>
              <div class="d-flex gap-2">
                <button id="btnDeactivate" class="btn btn-outline-secondary" type="button">
                  <i class="bi bi-slash-circle"></i> 비활성화
                </button>
                <button class="btn btn-outline-danger" type="button" data-bs-toggle="modal" data-bs-target="#deleteModal">
                  <i class="bi bi-trash"></i> 삭제
                </button>
              </div>
            </div>
          </div>
        </section>
      </section>
    </form>
    <!-- 폼 끝 -->
  </div>
  <!-- 메인 컨테이너 끝 -->

  <!-- 삭제 확인 모달 -->
  <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header border-0">
          <h5 class="modal-title text-danger"><i class="bi bi-trash"></i> 계정 영구 삭제</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
        </div>
        <div class="modal-body">
          정말 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.
          <div class="form-check mt-3">
            <input class="form-check-input" type="checkbox" id="agree">
            <label class="form-check-label" for="agree">안내에 동의합니다.</label>
          </div>
        </div>
        <div class="modal-footer border-0">
          <button class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
          <button id="confirmDelete" class="btn btn-danger" disabled>영구 삭제</button>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="ms-2 me-2">
  <br>
  ⓒ2025 Copyright: 이가은 임정인
</footer>
<!-- Bootstrap 먼저 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<!-- 페이지 전용 JS (정답 경로) -->
<script src="../js/account.js"></script>


</body>
</html>
